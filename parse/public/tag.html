<!DOCTYPE html>
<html xmlns:ng="http://angularjs.org" id="ng-app" ng-app="democracy-app">
  <head>
    <meta charset="utf-8">
    <title>Demokratiappen</title>
    <link href="https://netdna.bootstrapcdn.com/bootstrap/3.0.3/css/bootstrap.min.css" rel="stylesheet" type="text/css"/>
    <link href="css/demokratiappen.css" rel="stylesheet" type="text/css"/>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/underscore.js/1.5.2/underscore-min.js"></script>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.10.2/jquery.min.js"></script>
    <script src="https://ajax.googleapis.com/ajax/libs/angularjs/1.2.8/angular.min.js"></script>
    <script type="text/javascript" src="https://www.parsecdn.com/js/parse-1.2.16.min.js"></script>
    <script type="text/javascript" src="js/initialize_parse.js"></script>
    <script src="js/demokratiappen.js"></script>

    <meta name="description" content="Demokratiappen - web">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">

    <!-- HTML5 Shim and Respond.js IE8 support of HTML5 elements and media queries -->
    <!-- WARNING: Respond.js doesn't work if you view the page via file:// -->
    <!--[if lt IE 9]>
      <script src="https://oss.maxcdn.com/libs/html5shiv/3.7.0/html5shiv.js"></script>
      <script src="https://oss.maxcdn.com/libs/respond.js/1.3.0/respond.min.js"></script>
      <script src="https://cdnjs.cloudflare.com/ajax/libs/json3/3.2.6/json3.js"></script>
    <![endif]-->

  </head>
  <body>
    <div data-ng-controller="MainController" ng-cloak class="base" data-ng-show="loginService.stateLoggedIn == loginService.LOGGED_IN">
      <div class="content" style="height: 60px">
        <h2 style="text-align: center">Demokratiappen</h2>
        <h4 style="margin-left: 30px; float: left; display: inline">{{loginService.username}}</h4>
        <h4 style="margin-right: 30px; float: right; display: inline"><a ng-click="loginService.logout();" href="#">Logga ut</a></h4>
      </div>
      <div data-ng-controller="AddPageController" class="well content">
        <form name="addPageForm" role="form">
          <div class="form-group">
            <label for="titleInput">Titel</label>
            <input type="text" class="form-control" data-ng-model="addPageService.title" id="titleInput" placeholder="Skriv titeln här" required/>
          </div>
          <div class="form-group">
            <label for="urlInput">URL</label>
            <input type="text" class="form-control" data-ng-model="addPageService.url" id="urlInput" placeholder="Skriv URL:en här" required/>
          </div>

          <script type="text/ng-template" id="tag.html">
            <div style="margin: 16px">
            <button data-ng-click="tag.down = false; tag.up = !tag.up"
                    ng-class="{btn: true, 'btn-default': true,
                      'da-bg-green': tag.up}"
                    style="margin-right: -6px">
              <span class="glyphicon glyphicon-chevron-up"></span>
            </button>
            <button class="btn btn-default" ng-click="resetTag(tag)" style="width: 300px">
              {{tag.get("name")}}
            </button>
            <button data-ng-click="tag.up = false; tag.down = !tag.down"
                    ng-class="{btn: true, 'btn-default': true,
                      'da-bg-red': tag.down}"
                    style="margin-left: -6px">
              <span class="glyphicon glyphicon-chevron-down"></span>
            </button>
            </div>
          </script> 

          <div style="margin-top: 40px">
             <div data-ng-repeat="tag in tags" ng-include="'tag.html'" style="text-align: center; margin: auto">
             </div>
          </div>

          <div style="text-align: center">
          <button data-ng-click="abort()" class="btn btn-default" style="margin-top: 20px; margin-right: 80px; font-weight: bold">
            Avbryt
          </button>

          <button data-ng-click="post();" class="btn btn-default" style="margin-top: 20px; font-weight: bold">
            Spara
          </button>
          </div>
        </form>
      </div>
    </div>

    <div data-ng-controller="LoginController">
      <div ng-class="{'md-overlay': true,
                         'md-show': loginService.stateLoggedIn != loginService.LOGGED_IN}">

        <div ng-style="fillerHeight()"></div>

        <div id="modallogin"
          ng-class="{'md-modal': true,
                      'md-show': loginService.stateLoggedIn != loginService.LOGGED_IN}">

          <div class="md-content">
            <h3 ng-show="loginService.stateLoginProcess == loginService.LOADING">
              Laddar...
            </h3>
            <h3 class="md-failure" ng-show="loginService.stateLoginProcess == loginService.LOGIN_FAILED">
              Inloggning misslyckades
            </h3>
            <h3 class="md-failure" ng-show="loginService.stateLoginProcess == loginService.REGISTRATION_FAILED">
              Registrering misslyckades
            </h3>

            <form role="form" ng-show="loginService.stateLoginProcess != loginService.LOADING">
              <div class="form-group">
                <label for="loginUsernameInput">Användarnamn</label>
                <input type="text" class="form-control" data-ng-model="loginService.username" id="loginUsernameInput" placeholder="Ange användarnamn" autofocus>
              </div>
              <div class="form-group">
                <label for="loginPasswordInput">Lösenord</label>
                <input type="password" data-ng-model="loginService.password" id="loginPasswordInput" class="form-control" placeholder="Ange lösenord">
              </div>

              <button data-ng-click="loginService.login()" class="btn btn-primary" style="margin-left: 100px">Logga in</button>
              <button data-ng-click="loginService.signUp()" class="btn btn-default" style="margin-right: 100px; float: right">Registrera</button>
            </form>
          </div>
        </div>
      </div>
    </div>
  </body>
</html>

