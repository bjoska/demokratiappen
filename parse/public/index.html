<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
    <title>Demokratiappend - Web</title>
    <link href="https://netdna.bootstrapcdn.com/bootstrap/3.0.3/css/bootstrap.min.css" rel="stylesheet" type="text/css"/>
    <link href="css/demokratiappen.css" rel="stylesheet" type="text/css"/>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/underscore.js/1.5.2/underscore-min.js"></script>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.10.2/jquery.min.js"></script>
    <script src="https://ajax.googleapis.com/ajax/libs/angularjs/1.2.8/angular.min.js"></script>
    <script type="text/javascript" src="http://www.parsecdn.com/js/parse-1.2.16.min.js"></script>
    <script type="text/javascript" src="js/initialize_parse.js"></script>
    <script src="js/demokratiappen.js"></script>

    <meta name="description" content="Demokratiappen - web">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">

    <!-- HTML5 Shim and Respond.js IE8 support of HTML5 elements and media queries -->
    <!-- WARNING: Respond.js doesn't work if you view the page via file:// -->
    <!--[if lt IE 9]>
      <script src="https://oss.maxcdn.com/libs/html5shiv/3.7.0/html5shiv.js"></script>
      <script src="https://oss.maxcdn.com/libs/respond.js/1.3.0/respond.min.js"></script>
    <![endif]-->

  </head>
  <body>
    <div class="container">
      <h1>Demokratiappen</h1>

      <div data-ng-app="democracy-app" data-ng-controller="MainController" ng-cloak>
        <div data-ng-controller="AddPageController" data-ng-hide="loginService.state == 0" class="well">
          <form role="form">
            <div class="form-group">
              <label for="urlInput">URL</label>
              <input type="text" class="form-control" data-ng-model="addPageService.url" id="urlInput" placeholder="Enter URL"/>
            </div>

            Taggar:
            <span data-ng-repeat="tag in tags" data-ng-bind="tag" class="label label-default" style="margin: 0.1em;white-space: wrap;">
            </span>
            <button data-ng-click="post();" class="btn btn-default">Post</button>
          </form>
        </div>

        <div data-ng-controller="ListController" data-ng-hide="loginService.state == 0" class="well">
          <div data-ng-repeat="article in articles" class="article">
            <h2>
              <a href="{{article.url}}" data-ng-bind="article.title"></a>
            </h2>
            <div class="tags">
              <span data-ng-repeat="tag in article.tags" data-ng-bind="tag.name" class="label label-{{tag.type}}" style="margin-right: 0.5em;">
            </div>
          </div>
        </div>

        <div data-ng-controller="LoginController">
          <div ng-class="{'md-overlay': true,
                             'md-show': loginService.stateLoggedIn != loginService.LOGGED_IN}">

            <div ng-style="fillerHeight()"></div>

            <div id="modallogin"
              ng-class="{'md-modal': true,
                          'md-show': loginService.stateLoggedIn != loginService.LOGGED_IN}">

              <div class="md-content">
                <h3 ng-show="loginService.stateLoginProcess == loginService.LOADING">
                  Laddar...
                </h3>
                <h3 class="md-failure" ng-show="loginService.stateLoginProcess == loginService.LOGIN_FAILED">
                  Inloggning misslyckades
                </h3>
                <h3 class="md-failure" ng-show="loginService.stateLoginProcess == loginService.REGISTRATION_FAILED">
                  Registrering misslyckades
                </h3>

                <form role="form" ng-show="loginService.stateLoginProcess != loginService.LOADING">
                  <div class="form-group">
                    <label for="loginUsernameInput">Användarnamn</label>
                    <input type="text" class="form-control" data-ng-model="loginService.username" id="loginUsernameInput" placeholder="Ange användarnamn">
                  </div>
                  <div class="form-group">
                    <label for="loginPasswordInput">Lösenord</label>
                    <input type="password" data-ng-model="loginService.password" id="loginPasswordInput" class="form-control" placeholder="Ange lösenord">
                  </div>

                  <button data-ng-click="loginService.login()" class="btn btn-primary" style="margin-left: 100px">Logga in</button>
                  <button data-ng-click="loginService.signUp()" class="btn btn-default" style="margin-right: 100px; float: right">Registrera</button>
                </form>
              </div>
            </div>
          </div>
          <form role="form" data-ng-hide="loginService.state == 0">
            <button data-ng-click="loginService.logout();" class="btn btn-default">Logga ut</button>
          </form>
        </div>
      </div>
    </div>
  </body>
</html>
